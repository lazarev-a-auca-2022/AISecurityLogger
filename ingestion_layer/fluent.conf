# Sample FluentD configuration for the Ingestion Layer MVP

# Define a source (e.g., reading from a dummy file)
<source>
  @type tail
  path /fluentd/etc/app.log  # Path inside the container
  pos_file /fluentd/etc/app.log.pos
  tag app.log
  @label @kafka
</source>

# Define a label for routing to Kafka
<label @kafka>
  <match app.log>
    @type kafka2
    brokers kafka:9092
    topic security_logs

    <format>
      @type json
    </format>

    # Optional: Configure buffering
    <buffer>
      @type file
      path /var/log/fluentd/buffer/kafka
      flush_interval 5s
    </buffer>
  </match>
</label>
